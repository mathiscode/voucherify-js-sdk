{"version":3,"file":"voucherifywidget.umd.production.min.js","sources":["../src/VoucherifyLogo.tsx","../../../node_modules/clsx/dist/clsx.m.js","../src/helpers/index.ts","../src/hooks/useVoucherifyClient.ts","../src/hooks/useVoucherifyValidateInputs.ts","../src/hooks/useVoucherifyPublishInputs.ts","../src/hooks/useVoucherifyRedeemInputs.ts","../src/hooks/useVoucherifySubscribeInputs.ts","../src/VoucherifySubscribe.tsx","../src/VoucherifyPublish.tsx","../src/VoucherifyRedeem.tsx","../src/VoucherifyValidate.tsx"],"sourcesContent":["import * as React from 'react'\n\ninterface VoucherifyLogoProps {\n\tsrc?: string\n\talt?: string\n}\n\nexport function VoucherifyLogo({ src, alt }: VoucherifyLogoProps) {\n\treturn (\n\t\t<figure className=\"voucherifyLogo\">\n\t\t\t{src ? (\n\t\t\t\t<img className=\"voucherifyLogo\" src={src} alt={alt} />\n\t\t\t) : (\n\t\t\t\t<svg className=\"voucherifyLogo\" viewBox=\"0 0 46 45\">\n\t\t\t\t\t<path\n\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\tfill-rule=\"nonzero\"\n\t\t\t\t\t\td=\"M18.494 3.174c2.112 2.131 3.145 4.69 3.145 7.72 0 3.032-1.033 5.59-3.145 7.722-2.112 2.131-4.647 3.173-7.651 3.173-3.004 0-5.539-1.042-7.651-3.173C1.032 16.532 0 13.926 0 10.942s1.033-5.637 3.145-7.768C5.257 1.042 7.839 0 10.843 0c2.957 0 5.539 1.042 7.65 3.174zm-7.651 1.231c-1.784 0-3.286.616-4.553 1.895-1.268 1.279-1.878 2.795-1.878 4.595 0 1.8.61 3.316 1.878 4.594 1.267 1.28 2.77 1.895 4.553 1.895 1.784 0 3.286-.616 4.553-1.895 1.267-1.278 1.877-2.794 1.877-4.594 0-1.8-.61-3.316-1.877-4.595-1.267-1.232-2.77-1.895-4.553-1.895zM34.782 44.574c-3.051-.19-5.54-1.232-7.51-3.221-2.066-2.085-3.145-5.21-3.145-8.195v-.569c0-.852.234-1.468.657-1.942.422-.426.938-.663 1.549-.663.61 0 1.126.237 1.549.663.422.427.657 1.042.657 1.895v.947c.094 1.611.704 3.553 1.877 4.69 1.268 1.279 2.77 1.895 4.553 1.895h.094c1.784 0 3.286-.616 4.553-1.895 1.174-1.137 1.784-3.079 1.878-4.69v-.947c0-.805.235-1.42.657-1.895.422-.426.939-.663 1.549-.663s1.127.237 1.549.663c.422.427.657 1.09.657 1.942v.569c-.047 2.984-1.08 6.063-3.145 8.195-1.971 1.99-4.459 3.079-7.51 3.22h-.47zM6.102 42.916c-.563 0-1.126-.237-1.596-.663-.892-.9-.892-2.321 0-3.174L40.367 2.937c.892-.9 2.3-.9 3.145 0 .892.9.892 2.32 0 3.174L7.698 42.253a2.307 2.307 0 01-1.596.663z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t)}\n\t\t</figure>\n\t)\n}\n","function toVal(mix) {\n\tvar k, y, str='';\n\n\tif (typeof mix === 'string' || typeof mix === 'number') {\n\t\tstr += mix;\n\t} else if (typeof mix === 'object') {\n\t\tif (Array.isArray(mix)) {\n\t\t\tfor (k=0; k < mix.length; k++) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tif (y = toVal(mix[k])) {\n\t\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\t\tstr += y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (k in mix) {\n\t\t\t\tif (mix[k]) {\n\t\t\t\t\tstr && (str += ' ');\n\t\t\t\t\tstr += k;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn str;\n}\n\nexport default function () {\n\tvar i=0, tmp, x, str='';\n\twhile (i < arguments.length) {\n\t\tif (tmp = arguments[i++]) {\n\t\t\tif (x = toVal(tmp)) {\n\t\t\t\tstr && (str += ' ');\n\t\t\t\tstr += x\n\t\t\t}\n\t\t}\n\t}\n\treturn str;\n}\n","const capitalizeString = (string: string) => {\n\treturn string.charAt(0).toUpperCase() + string.slice(1)\n}\n\nexport const splitLongKey = (key: string) => {\n\treturn key\n\t\t.split('_')\n\t\t.map(k => capitalizeString(k))\n\t\t.join('')\n}\n\nexport const removeEmptyAttributes = (obj: { [x: string]: any }) => {\n\tObject.keys(obj).forEach(\n\t\tk =>\n\t\t\t(obj[k] && typeof obj[k] === 'object' && removeEmptyAttributes(obj[k])) ||\n\t\t\t(!obj[k] && (obj[k] !== undefined || obj[k] === '') && delete obj[k]),\n\t)\n\treturn obj\n}\n\nexport const validatePhoneNumber = (phoneNumber: string) => {\n\tconst re = /^[+]?[(]?[0-9]{3}[)]?[-\\s.]?[0-9]{3}[-\\s.]?[0-9]{4,6}$/im\n\treturn re.test(phoneNumber)\n}\n\nexport const validateEmail = (email: string) => {\n\tconst re = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@(([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{2,})$/i\n\treturn re.test(email.toLowerCase())\n}\n","import { useState, useEffect } from 'react'\nimport { VoucherifyClientSide, VoucherifyClientSideOptions } from '@voucherify/sdk'\n\nexport function useVoucherifyClient(options: VoucherifyClientSideOptions) {\n\tconst [client, setClient] = useState(() => VoucherifyClientSide(options))\n\tconst [isSubmitting, setSubmitting] = useState(false)\n\n\tuseEffect(\n\t\tfunction () {\n\t\t\tsetClient(VoucherifyClientSide(options))\n\t\t},\n\t\t[options.apiUrl, options.clientApplicationId, options.clientSecretKey, options.trackingId, options.origin],\n\t)\n\n\treturn [client, isSubmitting, setSubmitting] as const\n}\n","import { VoucherifyValidateInputs, VoucherifyValidateInputsState } from '../types/VoucherifyValidate'\nimport { useCallback, useState } from 'react'\n\nfunction getEmptyInputs(): VoucherifyValidateInputs {\n\treturn {\n\t\tvoucherifyCode: '',\n\t\tvoucherifyAmount: '',\n\t\tvoucherifyDiscountType: '',\n\t\tvoucherifyPercentOff: 0,\n\t\tvoucherifyAmountOff: 0,\n\t\tvoucherifyUnitOff: 0,\n\t\tvoucherifyTracking: '',\n\t}\n}\n\nfunction getEmptyInputState(): VoucherifyValidateInputsState {\n\treturn {\n\t\tvoucherifyCode: false,\n\t\tvoucherifyAmount: false,\n\t\tvoucherifyValidate: false,\n\t}\n}\n\nexport function useVoucherifyValidateInputs() {\n\tconst [input, setInput] = useState(getEmptyInputs)\n\tconst [inputState, setInputState] = useState(getEmptyInputState)\n\n\tconst onInputChange = useCallback(function onChange(event: React.ChangeEvent<HTMLInputElement>) {\n\t\tevent.persist()\n\t\tconst name = event.target.name as keyof VoucherifyValidateInputs\n\t\tsetInput(prev => ({ ...prev, [name]: event.target.value }))\n\t}, [])\n\n\tconst resetInputs = useCallback(function reset() {\n\t\tsetInput(getEmptyInputs)\n\t\tsetInputState(getEmptyInputState)\n\t}, [])\n\n\treturn {\n\t\tinput,\n\t\tinputState,\n\t\tonInputChange,\n\t\tresetInputs,\n\t\tsetInput,\n\t\tsetInputState,\n\t}\n}\n","import { VoucherifyPublishInputs, VoucherifyPublishInputsState } from '../types/VoucherifyPublish'\nimport { useCallback, useState } from 'react'\n\nfunction getEmptyInputs(): VoucherifyPublishInputs {\n\treturn {\n\t\tname: '',\n\t\temail: '',\n\t\tphone: '',\n\t\tline_1: '',\n\t\tline_2: '',\n\t\tpostal_code: '',\n\t\tcity: '',\n\t\tstate: '',\n\t\tcountry: '',\n\t\tvoucherifyPublishStatus: '',\n\t\tvoucherifyTracking: '',\n\t\tvoucherifyPublish: '',\n\t}\n}\n\nfunction getEmptyInputState(): VoucherifyPublishInputsState {\n\treturn {\n\t\tname: true,\n\t\tphone: true,\n\t\temail: true,\n\t\tline_1: true,\n\t\tline_2: true,\n\t\tpostal_code: true,\n\t\tcity: true,\n\t\tstate: true,\n\t\tcountry: true,\n\t\tvoucherifyPublishStatus: true,\n\t\tvoucherifyPublish: true,\n\t}\n}\n\nexport function useVoucherifyPublishInputs() {\n\tconst [input, setInput] = useState(getEmptyInputs)\n\tconst [inputStates, setInputState] = useState(getEmptyInputState)\n\n\tconst onInputChange = useCallback(function onChange(event: React.ChangeEvent<HTMLInputElement>) {\n\t\tconst name = event.target.name as keyof VoucherifyPublishInputs\n\t\tsetInput(prev => ({ ...prev, [name]: event.target.value }))\n\t}, [])\n\n\tconst resetInputs = useCallback(function reset() {\n\t\tsetInput(getEmptyInputs)\n\t\tsetInputState(getEmptyInputState)\n\t}, [])\n\n\treturn {\n\t\tinput,\n\t\tinputStates,\n\t\tonInputChange,\n\t\tresetInputs,\n\t\tsetInput,\n\t\tsetInputState,\n\t}\n}\n","import { VoucherifyRedeemInputs, VoucherifyRedeemInputsState } from '../types/VoucherifyRedeem'\nimport { useCallback, useState } from 'react'\n\nfunction getEmptyInputs(): VoucherifyRedeemInputs {\n\treturn {\n\t\tvoucherifyCode: '',\n\t\tvoucherifyAmount: '',\n\t\tvoucherifyTracking: '',\n\t}\n}\n\nfunction getEmptyInputState(): VoucherifyRedeemInputsState {\n\treturn {\n\t\tvoucherifyCode: false,\n\t\tvoucherifyAmount: false,\n\t\tvoucherifyRedeem: false,\n\t}\n}\n\nfunction getEmptyValidInputState(): VoucherifyRedeemInputsState {\n\treturn {\n\t\tvoucherifyCode: false,\n\t\tvoucherifyAmount: false,\n\t\tvoucherifyRedeem: false,\n\t}\n}\n\nexport function useVoucherifyRedeemInputs() {\n\tconst [input, setInput] = useState(getEmptyInputs)\n\tconst [inputStates, setInputState] = useState(getEmptyInputState)\n\tconst [inputValidStates, setValidInputState] = useState(getEmptyValidInputState)\n\n\tconst onInputChange = useCallback(function onChange(event: React.ChangeEvent<HTMLInputElement>) {\n\t\tconst name = event.target.name as keyof VoucherifyRedeemInputs\n\t\tsetInput(prev => ({ ...prev, [name]: event.target.value }))\n\t}, [])\n\n\tconst resetInputs = useCallback(function reset() {\n\t\tsetInput(getEmptyInputs)\n\t\tsetInputState(getEmptyInputState)\n\t}, [])\n\n\treturn {\n\t\tinput,\n\t\tinputStates,\n\t\tinputValidStates,\n\t\tsetValidInputState,\n\t\tonInputChange,\n\t\tresetInputs,\n\t\tsetInput,\n\t\tsetInputState,\n\t}\n}\n","import { VoucherifySubscribeInputs, VoucherifySubscribeInputsState } from '../types/VoucherifySubscribe'\nimport { useCallback, useState } from 'react'\n\nfunction getEmptyInputs(): VoucherifySubscribeInputs {\n\treturn {\n\t\tname: '',\n\t\temail: '',\n\t\tphone: '',\n\t\tline_1: '',\n\t\tline_2: '',\n\t\tpostal_code: '',\n\t\tcity: '',\n\t\tstate: '',\n\t\tcountry: '',\n\t\tvoucherifySubscribeStatus: '',\n\t\tvoucherifySubscribe: '',\n\t}\n}\n\nfunction getEmptyInputState(): VoucherifySubscribeInputsState {\n\treturn {\n\t\tname: true,\n\t\tphone: true,\n\t\temail: true,\n\t\tline_1: true,\n\t\tline_2: true,\n\t\tpostal_code: true,\n\t\tcity: true,\n\t\tstate: true,\n\t\tcountry: true,\n\t\tvoucherifySubscribeStatus: true,\n\t\tvoucherifySubscribe: true,\n\t}\n}\n\nexport function useVoucherifySubscribeInputs() {\n\tconst [input, setInput] = useState(getEmptyInputs)\n\tconst [inputStates, setInputState] = useState(getEmptyInputState)\n\n\tconst onInputChange = useCallback(function onChange(event: React.ChangeEvent<HTMLInputElement>) {\n\t\tconst name = event.target.name as keyof VoucherifySubscribeInputs\n\n\t\tif (event.target.value === 'off') {\n\t\t\tsetInput(prev => ({ ...prev, [name]: 'on' }))\n\t\t} else if (event.target.value === 'on') {\n\t\t\tsetInput(prev => ({ ...prev, [name]: 'off' }))\n\t\t} else {\n\t\t\tsetInput(prev => ({ ...prev, [name]: event.target.value }))\n\t\t}\n\t}, [])\n\n\tconst resetInputs = useCallback(function reset() {\n\t\tsetInput(getEmptyInputs)\n\t\tsetInputState(getEmptyInputState)\n\t}, [])\n\n\treturn {\n\t\tinput,\n\t\tinputStates,\n\t\tonInputChange,\n\t\tresetInputs,\n\t\tsetInput,\n\t\tsetInputState,\n\t}\n}\n","import * as React from 'react'\n\nimport {\n\tClientSideCustomersCreateParams,\n\tClientSideCustomersCreateResponse,\n\tVoucherifyClientSideOptions,\n} from '@voucherify/sdk'\nimport { removeEmptyAttributes, splitLongKey, validateEmail, validatePhoneNumber } from './helpers'\n\nimport { NotDefinedPlaceholder } from './types/VoucherifyPublish'\nimport { VoucherifyLogo } from './VoucherifyLogo'\nimport { VoucherifySubscribeLoadedConsents } from './types/VoucherifySubscribe'\nimport clsx from 'clsx'\nimport { useVoucherifyClient } from './hooks/useVoucherifyClient'\nimport { useVoucherifySubscribeInputs } from './hooks/useVoucherifySubscribeInputs'\n\nconst UNCONFIRMED_CUSTOMER = 'Confirm your subscription to our list. Check your email for further instructions.'\nconst ERROR_MESSAGE =\n\t'We ran into a configuration error. Please try that again. If the error persists, please contact support.'\n\ninterface WidgetFields {\n\tname?: 'name' | 'email' | 'phone' | 'line_1' | 'line_2' | 'city' | 'postal_code' | 'state' | 'country'\n\trequired: boolean\n\tplaceholder?: string\n\tid?: string\n}\n\ninterface Consents {\n\tid: string\n\trequired: boolean\n}\ninterface VoucherifySubscribeOptions extends VoucherifyClientSideOptions {\n\t/**\n\t * CSS class applied to the input when data is invalid\n\t */\n\tclassInvalid?: string\n\t/**\n\t * CSS class describing animation of the input field when data is invalid\n\t */\n\tclassInvalidAnimation?: string\n\t/**\n\t * CSS class applied to the input when data is valid\n\t */\n\tclassValid?: string\n\t/**\n\t * CSS class describing animation of the input field when data is valid\n\t */\n\tclassValidAnimation?: string\n\t/**\n\t * source of the image appearing in the circle at the top\n\t */\n\tlogoSrc?: string\n\t/**\n\t * alt message of the image appearing in the circle at the top\n\t */\n\tlogoAlt?: string\n\t/**\n\t * a callback function invoked when the data is valid, it takes the updateConsents response as a parameter\n\t */\n\tonSubscribed?: (response: any) => void\n\t/**\n\t * a callback function invoked when there is an error\n\t */\n\tonError?: (error: any) => void\n\t/**\n\t * require customer to confirm subscription by email\n\t */\n\tenableDoubleOptIn?: boolean\n\t/**\n\t * list of fields to be displayed on the widget\n\t */\n\tcustomerFields?: WidgetFields[]\n\t/**\n\t * a placeholder text to displayed on required 'email' field\n\t */\n\temailPlaceholder: string\n\t/**\n\t * list of consent objects to be displayed on the widget\n\t */\n\tconsents: Consents[]\n\t/**\n\t * a text displayed on the button (default: \"Subscribe\")\n\t */\n\ttextSubscribe?: string\n\t/**\n\t * a text displayed after successful subscription (default: \"Thank you for subscribing\")\n\t */\n\ttextSubscribeSuccess?: string\n}\n\nexport function VoucherifySubscribe({\n\tapiUrl,\n\tclientApplicationId,\n\tclientSecretKey,\n\ttrackingId,\n\torigin,\n\tclassInvalid,\n\tclassInvalidAnimation,\n\tclassValid,\n\tclassValidAnimation,\n\tlogoSrc,\n\tlogoAlt,\n\tconsents,\n\tonSubscribed,\n\tonError,\n\temailPlaceholder,\n\tcustomerFields = [],\n\tenableDoubleOptIn = false,\n\ttextSubscribe = 'Subscribe',\n\ttextSubscribeSuccess = 'Thank you for subscribing',\n}: VoucherifySubscribeOptions) {\n\tconst classNameInvalid = classInvalid || 'voucherifyInvalid'\n\tconst classNameValid = classValid || 'voucherifyValid'\n\tconst classNameInvalidAnimation = classInvalidAnimation || 'voucherifyAnimationShake'\n\tconst classNameValidAnimation = classValidAnimation || 'voucherifyAnimationTada'\n\n\tconst [allDisabled, setDisabled] = React.useState(false)\n\tconst [visible, setVisible] = React.useState(true)\n\tconst [runSubscribeOnce, setRunSubscribeOnce] = React.useState(false)\n\tconst [consentsError, setConsentsError] = React.useState(false)\n\tconst [loading, setLoading] = React.useState(true)\n\tconst [client, isSubmitting, setSubmitting] = useVoucherifyClient({\n\t\tapiUrl,\n\t\tclientApplicationId,\n\t\tclientSecretKey,\n\t\ttrackingId,\n\t\torigin,\n\t})\n\tconst [loadedConsents, setLoadedConsents] = React.useState<VoucherifySubscribeLoadedConsents>([])\n\n\tconst widgetFields: WidgetFields[] = [\n\t\t...customerFields,\n\t\t{ name: 'email', required: true, placeholder: emailPlaceholder },\n\t\t...consents,\n\t]\n\n\tconst { input, inputStates, onInputChange, resetInputs, setInput, setInputState } = useVoucherifySubscribeInputs()\n\n\tReact.useEffect(() => {\n\t\tresetInputs()\n\t\tsetDisabled(false)\n\t}, [client])\n\n\tconst onRender = React.useCallback(\n\t\tfunction _onRender() {\n\t\t\tif (!enableDoubleOptIn && consents !== [] && consents !== undefined) {\n\t\t\t\tclient\n\t\t\t\t\t.listConsents()\n\t\t\t\t\t.then(fetchedData => {\n\t\t\t\t\t\tconst fetchedConsents = fetchedData.consents.data\n\t\t\t\t\t\tconst filteredConsents = fetchedConsents.filter(o1 => consents.some(o2 => o1.id === o2?.id))\n\t\t\t\t\t\tif (filteredConsents.length === 0 || filteredConsents.length !== consents.length) {\n\t\t\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\tvoucherifySubscribeStatus: true,\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\tsetConsentsError(true)\n\t\t\t\t\t\t\tsetVisible(false)\n\t\t\t\t\t\t\tsetInput(prev => ({ ...prev, voucherifySubscribeStatus: ERROR_MESSAGE }))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst foundConsents: any = {}\n\t\t\t\t\t\t\tconst foundConsentsStates: any = {}\n\n\t\t\t\t\t\t\tfilteredConsents.forEach(consent => {\n\t\t\t\t\t\t\t\tfoundConsents[consent.id] = ''\n\t\t\t\t\t\t\t\tfoundConsentsStates[consent.id] = true\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t...foundConsents,\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t...foundConsentsStates,\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\tsetLoadedConsents(filteredConsents)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\tsetVisible(false)\n\t\t\t\t\t\tconsole.error(err)\n\t\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tvoucherifySubscribe: false,\n\t\t\t\t\t\t}))\n\t\t\t\t\t\tsetInput(prev => ({ ...prev, voucherifySubscribeStatus: ERROR_MESSAGE }))\n\n\t\t\t\t\t\tif (typeof onError === 'function') onError(err)\n\t\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tsetLoading(false)\n\t\t\t}\n\t\t},\n\t\t[enableDoubleOptIn, consentsError],\n\t)\n\n\tReact.useEffect(() => {\n\t\tonRender()\n\t}, [onRender])\n\n\tconst classNames: any[] = Object.keys(input).map(key => {\n\t\tlet className: string\n\n\t\tif (key === 'voucherifySubscribeStatus' || key === 'voucherifySubscribe') {\n\t\t\tclassName = key\n\t\t} else {\n\t\t\tclassName = `voucherifyCustomer${splitLongKey(key)}`\n\t\t}\n\n\t\tconst classes = clsx([\n\t\t\tclassName,\n\t\t\trunSubscribeOnce ? (inputStates[key] ? '' : `${classNameInvalid} ${classNameInvalidAnimation}`) : '',\n\t\t])\n\n\t\treturn {\n\t\t\tname: key,\n\t\t\tclasses,\n\t\t}\n\t})\n\n\tconst notDefinedPlaceholders: NotDefinedPlaceholder = {\n\t\tname: 'e.g. Bruce Wayne',\n\t\temail: 'e.g. bruce@wayne.com',\n\t\tphone: 'e.g. +48 000 000 000',\n\t\tline_1: 'e.g. Wayne Manor',\n\t\tline_2: 'e.g. 22B',\n\t\tpostal_code: 'e.g. 00-0014',\n\t\tcity: 'e.g. Gotham',\n\t\tstate: 'e.g. New Jersey',\n\t\tcountry: 'e.g. USA',\n\t}\n\n\tconst createInput = (inputName: string, inputPlaceholder: string = '') => {\n\t\tlet inputType: string\n\n\t\tif (inputName === 'phone') {\n\t\t\tinputType = 'tel'\n\t\t} else if (inputName === 'email') {\n\t\t\tinputType = 'email'\n\t\t} else {\n\t\t\tinputType = 'text'\n\t\t}\n\t\treturn (\n\t\t\t<input\n\t\t\t\ttype={inputType}\n\t\t\t\tplaceholder={inputPlaceholder ? inputPlaceholder : notDefinedPlaceholders[`${inputName}`]}\n\t\t\t\tname={inputName}\n\t\t\t\tvalue={input[`${inputName}`]}\n\t\t\t\tonChange={onInputChange}\n\t\t\t\tclassName={classNames.find((cls: any) => cls.name === inputName).classes}\n\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t\tstyle={{ display: visible ? 'block' : 'none' }}\n\t\t\t></input>\n\t\t)\n\t}\n\n\tconst onSubmit = React.useCallback(\n\t\tfunction onSubmit(_event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n\t\t\tsetSubmitting(true)\n\t\t\tsetInput(prev => ({\n\t\t\t\t...prev,\n\t\t\t\tvoucherifySubscribeStatus: '',\n\t\t\t}))\n\n\t\t\tsetRunSubscribeOnce(true)\n\n\t\t\tconst payload: ClientSideCustomersCreateParams = {\n\t\t\t\tsource_id: input.email,\n\t\t\t\tname: input.name,\n\t\t\t\tphone: input.phone.replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim(),\n\t\t\t\temail: input.email,\n\t\t\t\taddress: {\n\t\t\t\t\tline_1: input.line_1,\n\t\t\t\t\tline_2: input.line_2,\n\t\t\t\t\tpostal_code: input.postal_code,\n\t\t\t\t\tcity: input.city,\n\t\t\t\t\tstate: input.state,\n\t\t\t\t\tcountry: input.country,\n\t\t\t\t},\n\t\t\t}\n\n\t\t\tconst sanitizedPayload = removeEmptyAttributes(payload)\n\n\t\t\tconst inputStatesAfterValidation = widgetFields.reduce(\n\t\t\t\t(result, field) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!enableDoubleOptIn &&\n\t\t\t\t\t\tfield?.required &&\n\t\t\t\t\t\tfield?.id &&\n\t\t\t\t\t\t(input[field.id] === 'off' || input[field.id].trim() === '')\n\t\t\t\t\t) {\n\t\t\t\t\t\tresult[field.id] = false\n\t\t\t\t\t\treturn result\n\t\t\t\t\t}\n\t\t\t\t\tif (field?.required && field?.name && input[field.name].trim() === '') {\n\t\t\t\t\t\tresult[field.name] = false\n\t\t\t\t\t\treturn result\n\t\t\t\t\t}\n\t\t\t\t\tif (field?.name === 'phone' && input['phone'].replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim() !== '') {\n\t\t\t\t\t\tresult['phone'] = validatePhoneNumber(input['phone'].replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim())\n\t\t\t\t\t\treturn result\n\t\t\t\t\t}\n\t\t\t\t\tif (field?.name === 'email' && input['email'].replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim() !== '') {\n\t\t\t\t\t\tresult['email'] = validateEmail(input['email'].replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim())\n\t\t\t\t\t\treturn result\n\t\t\t\t\t}\n\t\t\t\t\tif (field?.name) {\n\t\t\t\t\t\tresult[field.name] = true\n\t\t\t\t\t} else if (field?.id) {\n\t\t\t\t\t\tresult[field.id] = true\n\t\t\t\t\t}\n\t\t\t\t\treturn result\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t...inputStates,\n\t\t\t\t},\n\t\t\t)\n\n\t\t\tsetInputState(prev => ({\n\t\t\t\t...prev,\n\t\t\t\t...inputStatesAfterValidation,\n\t\t\t}))\n\n\t\t\tconst validationFailed = Object.values(inputStatesAfterValidation).some(val => !val)\n\n\t\t\tif (!validationFailed) {\n\t\t\t\tclient\n\t\t\t\t\t.createCustomer(sanitizedPayload, enableDoubleOptIn)\n\t\t\t\t\t.then(function (_response: ClientSideCustomersCreateResponse) {\n\t\t\t\t\t\tif (_response.object === 'unconfirmed_customer') {\n\t\t\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\tvoucherifySubscribeStatus: UNCONFIRMED_CUSTOMER,\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tvoucherifySubscribeStatus: textSubscribeSuccess,\n\t\t\t\t\t\t}))\n\n\t\t\t\t\t\tif (loadedConsents.length !== 0) {\n\t\t\t\t\t\t\tconst createdCustomerId = _response.id\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\temail,\n\t\t\t\t\t\t\t\tphone,\n\t\t\t\t\t\t\t\tline_1,\n\t\t\t\t\t\t\t\tline_2,\n\t\t\t\t\t\t\t\tpostal_code,\n\t\t\t\t\t\t\t\tcity,\n\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\tcountry,\n\t\t\t\t\t\t\t\tvoucherifySubscribeStatus,\n\t\t\t\t\t\t\t\tvoucherifySubscribe,\n\t\t\t\t\t\t\t\tvoucherifyTracking,\n\t\t\t\t\t\t\t\t...consents\n\t\t\t\t\t\t\t} = input\n\n\t\t\t\t\t\t\tObject.keys(consents).forEach(function (key) {\n\t\t\t\t\t\t\t\tconsents[key] = consents[key] === 'on'\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\treturn client.updateConsents(createdCustomerId, consents)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn\n\t\t\t\t\t})\n\t\t\t\t\t.then(function (_response) {\n\t\t\t\t\t\tsetDisabled(true)\n\n\t\t\t\t\t\tsetVisible(false)\n\n\t\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tvoucherifySubscribeStatus: true,\n\t\t\t\t\t\t}))\n\n\t\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\temail: '',\n\t\t\t\t\t\t\tphone: '',\n\t\t\t\t\t\t\tline_1: '',\n\t\t\t\t\t\t\tline_2: '',\n\t\t\t\t\t\t\tpostal_code: '',\n\t\t\t\t\t\t\tcity: '',\n\t\t\t\t\t\t\tstate: '',\n\t\t\t\t\t\t\tcountry: '',\n\t\t\t\t\t\t\tvoucherifySubscribe: '',\n\t\t\t\t\t\t}))\n\n\t\t\t\t\t\tif (typeof onSubscribed === 'function') onSubscribed(_response)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tsetVisible(false)\n\t\t\t\t\t\tconsole.error(err)\n\t\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tvoucherifySubscribe: false,\n\t\t\t\t\t\t}))\n\t\t\t\t\t\tsetInput(prev => ({ ...prev, voucherifySubscribeStatus: ERROR_MESSAGE }))\n\n\t\t\t\t\t\tif (typeof onError === 'function') onError(err)\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => setSubmitting(false))\n\t\t\t} else {\n\t\t\t\tsetSubmitting(false)\n\t\t\t}\n\t\t},\n\t\t[input, onError, onSubscribed],\n\t)\n\treturn (\n\t\t<div className=\"voucherifyContainer wide\">\n\t\t\t<VoucherifyLogo src={logoSrc} alt={logoAlt} />\n\n\t\t\t{loading ? (\n\t\t\t\t<div className=\"loader\">Loading consents...</div>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t{customerFields.some(val => val.name === 'name') &&\n\t\t\t\t\t\tcreateInput('name', customerFields.find(field => field.name === 'name')?.placeholder)}\n\n\t\t\t\t\t<div className=\"voucherifyRow\" style={{ display: visible ? 'flex' : 'none' }}>\n\t\t\t\t\t\t{createInput('email', emailPlaceholder)}\n\t\t\t\t\t\t{customerFields.some(val => val.name === 'phone') &&\n\t\t\t\t\t\t\tcreateInput('phone', customerFields.find(field => field.name === 'phone')?.placeholder)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{customerFields.some(val => val.name === 'line_1') &&\n\t\t\t\t\t\tcreateInput('line_1', customerFields.find(field => field.name === 'line_1')?.placeholder)}\n\t\t\t\t\t{customerFields.some(val => val.name === 'line_2') &&\n\t\t\t\t\t\tcreateInput('line_2', customerFields.find(field => field.name === 'line_2')?.placeholder)}\n\n\t\t\t\t\t{customerFields.some(val => val.name === 'postal_code' || val.name === 'city') && (\n\t\t\t\t\t\t<div className=\"voucherifyRow\" style={{ display: visible ? 'flex' : 'none' }}>\n\t\t\t\t\t\t\t{customerFields.some(val => val.name === 'postal_code') &&\n\t\t\t\t\t\t\t\tcreateInput('postal_code', customerFields.find(field => field.name === 'postal_code')?.placeholder)}\n\t\t\t\t\t\t\t{customerFields.some(val => val.name === 'city') &&\n\t\t\t\t\t\t\t\tcreateInput('city', customerFields.find(field => field.name === 'city')?.placeholder)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{customerFields.some(val => val.name === 'state' || val.name === 'country') && (\n\t\t\t\t\t\t<div className=\"voucherifyRow\" style={{ display: visible ? 'flex' : 'none' }}>\n\t\t\t\t\t\t\t{customerFields.some(val => val.name === 'state') &&\n\t\t\t\t\t\t\t\tcreateInput('state', customerFields.find(field => field.name === 'state')?.placeholder)}\n\t\t\t\t\t\t\t{customerFields.some(val => val.name === 'country') &&\n\t\t\t\t\t\t\t\tcreateInput('country', customerFields.find(field => field.name === 'country')?.placeholder)}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tconsentsError\n\t\t\t\t\t\t\t\t? `voucherifySubscribeStatus ${classNameInvalid} ${classNameInvalidAnimation}`\n\t\t\t\t\t\t\t\t: `voucherifySubscribeStatus ${classNameValid} ${classNameValidAnimation}`\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstyle={{ display: !visible ? 'block' : 'none' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<p>{input['voucherifySubscribeStatus']}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t{!enableDoubleOptIn &&\n\t\t\t\t\t\tloadedConsents.length !== 0 &&\n\t\t\t\t\t\tloadedConsents.map((consent: any) => (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t{classNames.some(val => val.name === consent.id) && (\n\t\t\t\t\t\t\t\t\t<label className=\"voucherifyCheckboxContainer\" style={{ display: visible ? 'block' : 'none' }}>\n\t\t\t\t\t\t\t\t\t\t{consent.description}\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\t\tid={consent.name}\n\t\t\t\t\t\t\t\t\t\t\tname={consent.id}\n\t\t\t\t\t\t\t\t\t\t\tonChange={onInputChange}\n\t\t\t\t\t\t\t\t\t\t\tvalue={input[consent.id] === 'on' ? 'on' : 'off'}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\tclassName={`voucherifyCheckmark ${\n\t\t\t\t\t\t\t\t\t\t\t\tclassNames.find((cls: any) => cls.name === consent.id).classes\n\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t></span>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t))}\n\t\t\t\t\t<button\n\t\t\t\t\t\tclassName={classNames.find((cls: any) => cls.name === 'voucherifySubscribe').classes}\n\t\t\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t\t\t\tonClick={onSubmit}\n\t\t\t\t\t\tstyle={{ display: visible ? 'block' : 'none' }}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span className=\"voucherifySubscribeText\">{textSubscribe}</span>\n\t\t\t\t\t</button>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n","import * as React from 'react'\n\nimport { ClientSidePublishPayload, ClientSidePublishResponse, VoucherifyClientSideOptions } from '@voucherify/sdk'\nimport { removeEmptyAttributes, splitLongKey, validateEmail, validatePhoneNumber } from './helpers'\n\nimport { NotDefinedPlaceholder } from './types/VoucherifyPublish'\nimport { VoucherifyLogo } from './VoucherifyLogo'\nimport clsx from 'clsx'\nimport { useVoucherifyClient } from './hooks/useVoucherifyClient'\nimport { useVoucherifyPublishInputs } from './hooks/useVoucherifyPublishInputs'\n\ninterface VoucherifyPublishOptions extends VoucherifyClientSideOptions {\n\t/**\n\t * CSS class applied to the input when entered code is invalid\n\t */\n\tclassInvalid?: string\n\t/**\n\t * CSS class describing animation of the input field when entered code is invalid\n\t */\n\tclassInvalidAnimation?: string\n\t/**\n\t * CSS class applied to the input when entered code is valid\n\t */\n\tclassValid?: string\n\t/**\n\t * CSS class describing animation of the input field when entered code is valid\n\t */\n\tclassValidAnimation?: string\n\t/**\n\t * source of the image appearing in the circle at the top\n\t */\n\tlogoSrc?: string\n\t/**\n\t * alt message of the image appearing in the circle at the top\n\t */\n\tlogoAlt?: string\n\t/**\n\t * a callback function invoked when the entered code is valid, it takes the validation response as a parameter\n\t */\n\tonPublished?: (response: ClientSidePublishResponse) => void\n\t/**\n\t * a callback function invoked when there is an error\n\t */\n\tonError?: (error: any) => void\n\t/**\n\t * name of the campaign to which voucher will be published\n\t */\n\tcampaignName: string\n\t/**\n\t * list of fields to be displayed on the widget\n\t */\n\tcustomerFields?: {\n\t\tname: 'name' | 'email' | 'phone' | 'line_1' | 'line_2' | 'city' | 'postal_code' | 'state' | 'country'\n\t\trequired: boolean\n\t}[]\n\t/**\n\t * a placeholder text to displayed on 'name' field from customerFields\n\t */\n\tcustomerNamePlaceholder?: string\n\t/**\n\t * a placeholder text to displayed on 'email' field from customerFields\n\t */\n\tcustomerEmailPlaceholder?: string\n\t/**\n\t * a placeholder text to displayed on 'phone' field from customerFields\n\t */\n\tcustomerPhonePlaceholder?: string\n\t/**\n\t * a placeholder text to displayed on 'line_1' field from customerFields\n\t */\n\tcustomerLine1Placeholder?: string\n\t/**\n\t * a placeholder text to displayed on 'line_2' field from customerFields\n\t */\n\tcustomerLine2Placeholder?: string\n\t/**\n\t * a placeholder text to displayed on 'postal_code' field from customerFields\n\t */\n\tcustomerPostalCodePlaceholder?: string\n\t/**\n\t * a placeholder text to displayed on 'city' field from customerFields\n\t */\n\tcustomerCityPlaceholder?: string\n\t/**\n\t * a placeholder text to displayed on 'state' field from customerFields\n\t */\n\tcustomerStatePlaceholder?: string\n\t/**\n\t * a placeholder text to displayed on 'country' field from customerFields\n\t */\n\tcustomerCountryPlaceholder?: string\n\t/**\n\t * a text displayed on the button (default: \"Get Voucher\")\n\t */\n\ttextPublish?: string\n}\n\nexport function VoucherifyPublish({\n\tapiUrl,\n\tclientApplicationId,\n\tclientSecretKey,\n\ttrackingId,\n\torigin,\n\tclassInvalid,\n\tclassInvalidAnimation,\n\tclassValid,\n\tclassValidAnimation,\n\tlogoSrc,\n\tlogoAlt,\n\tonPublished,\n\tonError,\n\tcampaignName,\n\tcustomerFields = [],\n\tcustomerNamePlaceholder,\n\tcustomerEmailPlaceholder,\n\tcustomerPhonePlaceholder,\n\tcustomerLine1Placeholder,\n\tcustomerLine2Placeholder,\n\tcustomerPostalCodePlaceholder,\n\tcustomerCityPlaceholder,\n\tcustomerStatePlaceholder,\n\tcustomerCountryPlaceholder,\n\ttextPublish = 'Get voucher',\n}: VoucherifyPublishOptions) {\n\tconst classNameInvalid = classInvalid || 'voucherifyInvalid'\n\tconst classNameValid = classValid || 'voucherifyValid'\n\tconst classNameInvalidAnimation = classInvalidAnimation || 'voucherifyAnimationShake'\n\tconst classNameValidAnimation = classValidAnimation || 'voucherifyAnimationTada'\n\n\tconst [allDisabled, setDisabled] = React.useState(false)\n\tconst [visible, setVisible] = React.useState(true)\n\tconst [runPublishOnce, setRunPublishOnce] = React.useState(false)\n\n\tconst [client, isSubmitting, setSubmitting] = useVoucherifyClient({\n\t\tapiUrl,\n\t\tclientApplicationId,\n\t\tclientSecretKey,\n\t\ttrackingId,\n\t\torigin,\n\t})\n\n\tconst { input, inputStates, onInputChange, resetInputs, setInput, setInputState } = useVoucherifyPublishInputs()\n\n\tReact.useEffect(() => {\n\t\tresetInputs()\n\t\tsetDisabled(false)\n\t}, [client])\n\n\tconst classNames: any[] = Object.keys(input).map(key => {\n\t\tlet className: string\n\n\t\tif (key === 'voucherifyPublishStatus' || key === 'voucherifyTracking' || key === 'voucherifyPublish') {\n\t\t\tclassName = key\n\t\t} else {\n\t\t\tclassName = `voucherifyCustomer${splitLongKey(key)}`\n\t\t}\n\n\t\tconst classes = clsx([\n\t\t\tclassName,\n\t\t\trunPublishOnce ? (inputStates[key] ? '' : `${classNameInvalid} ${classNameInvalidAnimation}`) : '',\n\t\t])\n\n\t\treturn {\n\t\t\tname: key,\n\t\t\tclasses,\n\t\t}\n\t})\n\n\tconst notDefinedPlaceholders: NotDefinedPlaceholder = {\n\t\tname: 'e.g. Bruce Wayne',\n\t\temail: 'e.g. bruce@wayne.com',\n\t\tphone: 'e.g. +48 000 000 000',\n\t\tline_1: 'e.g. Wayne Manor',\n\t\tline_2: 'e.g. 22B',\n\t\tpostal_code: 'e.g. 00-0014',\n\t\tcity: 'e.g. Gotham',\n\t\tstate: 'e.g. New Jersey',\n\t\tcountry: 'e.g. USA',\n\t}\n\n\tconst createInput = (inputName: string, inputPlaceholder: string = '') => {\n\t\tlet inputType: string\n\n\t\tif (inputName === 'phone') {\n\t\t\tinputType = 'tel'\n\t\t} else if (inputName === 'email') {\n\t\t\tinputType = 'email'\n\t\t} else {\n\t\t\tinputType = 'text'\n\t\t}\n\t\treturn (\n\t\t\t<input\n\t\t\t\ttype={inputType}\n\t\t\t\tplaceholder={inputPlaceholder ? inputPlaceholder : notDefinedPlaceholders[`${inputName}`]}\n\t\t\t\tname={inputName}\n\t\t\t\tvalue={input[`${inputName}`]}\n\t\t\t\tonChange={onInputChange}\n\t\t\t\tclassName={classNames.find((cls: any) => cls.name === inputName).classes}\n\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t\tstyle={{ display: visible ? 'block' : 'none' }}\n\t\t\t></input>\n\t\t)\n\t}\n\n\tconst onSubmit = React.useCallback(\n\t\tfunction onSubmit(_event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n\t\t\tsetSubmitting(true)\n\t\t\tsetInput(prev => ({\n\t\t\t\t...prev,\n\t\t\t\tvoucherifyPublishStatus: '',\n\t\t\t\tvoucherifyTracking: '',\n\t\t\t}))\n\n\t\t\tsetRunPublishOnce(true)\n\n\t\t\tconst payload: ClientSidePublishPayload = {\n\t\t\t\tcustomer: {\n\t\t\t\t\tname: input.name,\n\t\t\t\t\tphone: input.phone.replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim(),\n\t\t\t\t\temail: input.email,\n\t\t\t\t\tsource_id: input.email,\n\t\t\t\t\taddress: {\n\t\t\t\t\t\tline_1: input.line_1,\n\t\t\t\t\t\tline_2: input.line_2,\n\t\t\t\t\t\tpostal_code: input.postal_code,\n\t\t\t\t\t\tcity: input.city,\n\t\t\t\t\t\tstate: input.state,\n\t\t\t\t\t\tcountry: input.country,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t}\n\n\t\t\tconst sanitizedPayload = removeEmptyAttributes(payload)\n\n\t\t\tconst inputStatesAfterValidation = customerFields.reduce(\n\t\t\t\t(result, field) => {\n\t\t\t\t\tif (field.required && input[field.name].trim() === '') {\n\t\t\t\t\t\tresult[field.name] = false\n\t\t\t\t\t\treturn result\n\t\t\t\t\t}\n\t\t\t\t\tif (field.name === 'phone' && input['phone'].replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim() !== '') {\n\t\t\t\t\t\tresult['phone'] = validatePhoneNumber(input['phone'].replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim())\n\t\t\t\t\t\treturn result\n\t\t\t\t\t}\n\t\t\t\t\tif (field.name === 'email' && input['email'].replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim() !== '') {\n\t\t\t\t\t\tresult['email'] = validateEmail(input['email'].replace(/[\\r\\n\\t\\f\\s\\v]/g, '').trim())\n\t\t\t\t\t\treturn result\n\t\t\t\t\t}\n\t\t\t\t\tresult[field.name] = true\n\t\t\t\t\treturn result\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: true,\n\t\t\t\t\temail: true,\n\t\t\t\t\tphone: true,\n\t\t\t\t\tline_1: true,\n\t\t\t\t\tline_2: true,\n\t\t\t\t\tpostal_code: true,\n\t\t\t\t\tcity: true,\n\t\t\t\t\tstate: true,\n\t\t\t\t\tcountry: true,\n\t\t\t\t\tvoucherifyPublishStatus: true,\n\t\t\t\t\tvoucherifyPublish: true,\n\t\t\t\t},\n\t\t\t)\n\n\t\t\tsetInputState(prev => ({\n\t\t\t\t...prev,\n\t\t\t\t...inputStatesAfterValidation,\n\t\t\t}))\n\n\t\t\tconst validationFailed = Object.values(inputStatesAfterValidation).some(val => !val)\n\n\t\t\tif (!validationFailed) {\n\t\t\t\tclient\n\t\t\t\t\t.publish(campaignName, sanitizedPayload)\n\t\t\t\t\t.then(function (_response) {\n\t\t\t\t\t\tconst response: ClientSidePublishResponse = _response\n\n\t\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\temail: '',\n\t\t\t\t\t\t\tphone: '',\n\t\t\t\t\t\t\tline_1: '',\n\t\t\t\t\t\t\tline_2: '',\n\t\t\t\t\t\t\tpostal_code: '',\n\t\t\t\t\t\t\tcity: '',\n\t\t\t\t\t\t\tstate: '',\n\t\t\t\t\t\t\tcountry: '',\n\t\t\t\t\t\t\tvoucherifyTracking: response?.tracking_id || '',\n\t\t\t\t\t\t\tvoucherifyPublishStatus: response.voucher.code,\n\t\t\t\t\t\t}))\n\n\t\t\t\t\t\tsetDisabled(true)\n\t\t\t\t\t\tsetVisible(false)\n\n\t\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tvoucherifyPublishStatus: true,\n\t\t\t\t\t\t}))\n\n\t\t\t\t\t\tif (typeof onPublished === 'function') onPublished(response)\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error(err)\n\t\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tvoucherifyPublish: false,\n\t\t\t\t\t\t}))\n\n\t\t\t\t\t\tif (typeof onError === 'function') onError(err)\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => setSubmitting(false))\n\t\t\t} else {\n\t\t\t\tsetSubmitting(false)\n\t\t\t}\n\t\t},\n\t\t[input, onError, onPublished],\n\t)\n\n\treturn (\n\t\t<div className=\"voucherifyContainer wide\">\n\t\t\t<VoucherifyLogo src={logoSrc} alt={logoAlt} />\n\n\t\t\t{customerFields.some(val => val.name === 'name') && createInput('name', customerNamePlaceholder)}\n\n\t\t\t{customerFields.some(val => val.name === 'email' || val.name === 'phone') && (\n\t\t\t\t<div className=\"voucherifyRow\" style={{ display: visible ? 'flex' : 'none' }}>\n\t\t\t\t\t{customerFields.some(val => val.name === 'email') && createInput('email', customerEmailPlaceholder)}\n\t\t\t\t\t{customerFields.some(val => val.name === 'phone') && createInput('phone', customerPhonePlaceholder)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{customerFields.some(val => val.name === 'line_1') && createInput('line_1', customerLine1Placeholder)}\n\t\t\t{customerFields.some(val => val.name === 'line_2') && createInput('line_2', customerLine2Placeholder)}\n\n\t\t\t{customerFields.some(val => val.name === 'postal_code' || val.name === 'city') && (\n\t\t\t\t<div className=\"voucherifyRow\" style={{ display: visible ? 'flex' : 'none' }}>\n\t\t\t\t\t{customerFields.some(val => val.name === 'postal_code') &&\n\t\t\t\t\t\tcreateInput('postal_code', customerPostalCodePlaceholder)}\n\t\t\t\t\t{customerFields.some(val => val.name === 'city') && createInput('city', customerCityPlaceholder)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t{customerFields.some(val => val.name === 'state' || val.name === 'country') && (\n\t\t\t\t<div className=\"voucherifyRow\" style={{ display: visible ? 'flex' : 'none' }}>\n\t\t\t\t\t{customerFields.some(val => val.name === 'state') && createInput('state', customerStatePlaceholder)}\n\t\t\t\t\t{customerFields.some(val => val.name === 'country') && createInput('country', customerCountryPlaceholder)}\n\t\t\t\t</div>\n\t\t\t)}\n\n\t\t\t<input\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tname=\"voucherifyTracking\"\n\t\t\t\tvalue={input['voucherifyTracking']}\n\t\t\t\tclassName=\"voucherifyTracking\"\n\t\t\t/>\n\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"voucherifyPublishStatus\"\n\t\t\t\tclassName={`voucherifyPublishStatus ${classNameValid} ${classNameValidAnimation}`}\n\t\t\t\tvalue={input['voucherifyPublishStatus']}\n\t\t\t\tstyle={{ display: !visible ? 'block' : 'none' }}\n\t\t\t/>\n\n\t\t\t<button\n\t\t\t\tclassName={classNames.find((cls: any) => cls.name === 'voucherifyPublish').classes}\n\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t\tonClick={onSubmit}\n\t\t\t\tstyle={{ display: visible ? 'block' : 'none' }}\n\t\t\t>\n\t\t\t\t<span className=\"VoucherifyPublishText\">{textPublish}</span>\n\t\t\t</button>\n\t\t</div>\n\t)\n}\n","import * as React from 'react'\n\nimport { ClientSideRedeemResponse, ClientSideRedeemWidgetPayload, VoucherifyClientSideOptions } from '@voucherify/sdk'\n\nimport { VoucherifyLogo } from './VoucherifyLogo'\nimport clsx from 'clsx'\nimport { removeEmptyAttributes } from './helpers'\nimport { useVoucherifyClient } from './hooks/useVoucherifyClient'\nimport { useVoucherifyRedeemInputs } from './hooks/useVoucherifyRedeemInputs'\n\ninterface VoucherifyRedeemOptions extends VoucherifyClientSideOptions {\n\t/**\n\t * CSS class applied to the input when entered code is invalid\n\t */\n\tclassInvalid?: string\n\t/**\n\t * CSS class describing animation of the input field when entered code is invalid\n\t */\n\tclassInvalidAnimation?: string\n\t/**\n\t * CSS class applied to the input when entered code is valid\n\t */\n\tclassValid?: string\n\t/**\n\t * CSS class describing animation of the input field when entered code is valid\n\t */\n\tclassValidAnimation?: string\n\t/**\n\t * source of the image appearing in the circle at the top\n\t */\n\tlogoSrc?: string\n\t/**\n\t * alt message of the image appearing in the circle at the top\n\t */\n\tlogoAlt?: string\n\t/**\n\t * a callback function invoked when the entered code is valid, it takes the validation response as a parameter\n\t */\n\tonRedeemed?: (response: ClientSideRedeemResponse) => void\n\t/**\n\t * a callback function invoked when there is an error\n\t */\n\tonError?: (error: any) => void\n\t/**\n\t * flag enables the amount input field\n\t */\n\tamount?: boolean\n\t/**\n\t * text displayed as a placeholder in the code input field\n\t */\n\ttextPlaceholder?: string\n\t/**\n\t * text displayed as a placeholder in the amount input field (`amount: true` is required)\n\t */\n\tamountPlaceholder?: string\n\t/**\n\t * a text displayed on the button (default: \"Redeem\")\n\t */\n\ttextRedeem?: string\n}\n\nexport function VoucherifyRedeem({\n\tapiUrl,\n\tclientApplicationId,\n\tclientSecretKey,\n\ttrackingId,\n\torigin,\n\tclassInvalid,\n\tclassInvalidAnimation,\n\tclassValid,\n\tclassValidAnimation,\n\tlogoSrc,\n\tlogoAlt,\n\tonRedeemed,\n\tonError,\n\tamount,\n\ttextPlaceholder,\n\tamountPlaceholder,\n\ttextRedeem = 'Redeem',\n}: VoucherifyRedeemOptions) {\n\tconst classNameInvalid = classInvalid || 'voucherifyInvalid'\n\tconst classNameValid = classValid || 'voucherifyValid'\n\tconst classNameInvalidAnimation = classInvalidAnimation || 'voucherifyAnimationShake'\n\tconst classNameValidAnimation = classValidAnimation || 'voucherifyAnimationTada'\n\n\tconst [allDisabled, setDisabled] = React.useState(false)\n\tconst [runRedeemOnce, setRunRedeemOnce] = React.useState(false)\n\n\tconst [client, isSubmitting, setSubmitting] = useVoucherifyClient({\n\t\tapiUrl,\n\t\tclientApplicationId,\n\t\tclientSecretKey,\n\t\ttrackingId,\n\t\torigin,\n\t})\n\n\tconst {\n\t\tinput,\n\t\tinputStates,\n\t\tonInputChange,\n\t\tresetInputs,\n\t\tsetInput,\n\t\tsetInputState,\n\t\tinputValidStates,\n\t\tsetValidInputState,\n\t} = useVoucherifyRedeemInputs()\n\n\tReact.useEffect(() => {\n\t\tresetInputs()\n\t\tsetDisabled(false)\n\t}, [client])\n\n\tconst classNames: any[] = Object.keys(inputStates).map(key => {\n\t\tlet className: string = key\n\n\t\tconst classes = clsx([\n\t\t\tclassName,\n\t\t\trunRedeemOnce ? (inputStates[key] ? `${classNameInvalid} ${classNameInvalidAnimation}` : '') : '',\n\t\t\trunRedeemOnce ? (inputValidStates[key] ? `${classNameValid} ${classNameValidAnimation}` : '') : '',\n\t\t])\n\n\t\treturn {\n\t\t\tname: key,\n\t\t\tclasses,\n\t\t}\n\t})\n\n\tconst onSubmit = React.useCallback(\n\t\tfunction onSubmit(_event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n\t\t\tsetInput(prev => ({\n\t\t\t\t...prev,\n\t\t\t\tvoucherifyTracking: '',\n\t\t\t}))\n\n\t\t\tsetRunRedeemOnce(true)\n\n\t\t\tconst payload: ClientSideRedeemWidgetPayload = {\n\t\t\t\torder: {\n\t\t\t\t\tamount:\n\t\t\t\t\t\tinput.voucherifyAmount.trim() === '' ||\n\t\t\t\t\t\tisNaN(parseInt((parseFloat(input.voucherifyAmount.replace(/,/, '.')) * 100).toString(), 10))\n\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t: parseInt((parseFloat(input.voucherifyAmount.replace(/,/, '.')) * 100).toString(), 10),\n\t\t\t\t},\n\t\t\t}\n\n\t\t\tconst sanitizedPayload = removeEmptyAttributes(payload)\n\n\t\t\tconst code: string = input.voucherifyCode.replace(/[\\r\\n\\t\\f\\v]/g, '').trim()\n\n\t\t\tif (\n\t\t\t\t!code ||\n\t\t\t\t(input.voucherifyAmount.trim() !== '' &&\n\t\t\t\t\tisNaN(parseInt((parseFloat(input.voucherifyAmount.replace(/,/, '.')) * 100).toString(), 10)))\n\t\t\t) {\n\t\t\t\treturn setInputState(prev => ({\n\t\t\t\t\t...prev,\n\t\t\t\t\tvoucherifyCode: !code ? true : false,\n\t\t\t\t\tvoucherifyAmount:\n\t\t\t\t\t\tamount && isNaN(parseInt((parseFloat(input.voucherifyAmount.replace(/,/, '.')) * 100).toString(), 10))\n\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t: false,\n\t\t\t\t}))\n\t\t\t}\n\n\t\t\tsetSubmitting(true)\n\n\t\t\tclient\n\t\t\t\t.redeem(code, sanitizedPayload)\n\t\t\t\t.then(function (_response) {\n\t\t\t\t\tconst response: ClientSideRedeemResponse = _response\n\t\t\t\t\tif (!response || response.result !== 'SUCCESS') {\n\t\t\t\t\t\tsetInputState(prev => ({ ...prev, voucherifyRedeem: true }))\n\t\t\t\t\t}\n\n\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tvoucherifyTracking: response?.tracking_id || '',\n\t\t\t\t\t}))\n\n\t\t\t\t\tsetDisabled(true)\n\n\t\t\t\t\tsetValidInputState(prev => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tvoucherifyCode: true,\n\t\t\t\t\t\tvoucherifyAmount: true,\n\t\t\t\t\t\tvoucherifyRedeem: true,\n\t\t\t\t\t}))\n\n\t\t\t\t\tif (typeof onRedeemed === 'function') onRedeemed(response)\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tvoucherifyRedeem: true,\n\t\t\t\t\t\tvoucherifyAmount: true,\n\t\t\t\t\t\tvoucherifyCode: true,\n\t\t\t\t\t}))\n\t\t\t\t\tif (typeof onError === 'function') onError(err)\n\t\t\t\t})\n\t\t\t\t.finally(() => setSubmitting(false))\n\t\t},\n\t\t[input, onError, onRedeemed, amount],\n\t)\n\n\treturn (\n\t\t<div className=\"voucherifyContainer\">\n\t\t\t<VoucherifyLogo src={logoSrc} alt={logoAlt} />\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tplaceholder={textPlaceholder || 'e.g. abc-123'}\n\t\t\t\tname=\"voucherifyCode\"\n\t\t\t\tvalue={input['voucherifyCode']}\n\t\t\t\tonChange={onInputChange}\n\t\t\t\tclassName={classNames.find((cls: any) => cls.name === 'voucherifyCode').classes}\n\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype={amount ? 'text' : 'hidden'}\n\t\t\t\tplaceholder={amountPlaceholder || 'e.g. 52.22'}\n\t\t\t\tname=\"voucherifyAmount\"\n\t\t\t\tvalue={input['voucherifyAmount']}\n\t\t\t\tonChange={onInputChange}\n\t\t\t\tclassName={classNames.find((cls: any) => cls.name === 'voucherifyAmount').classes}\n\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tname=\"voucherifyTracking\"\n\t\t\t\tvalue={input['voucherifyTracking']}\n\t\t\t\tclassName=\"voucherifyTracking\"\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName={classNames.find((cls: any) => cls.name === 'voucherifyRedeem').classes}\n\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t\tonClick={onSubmit}\n\t\t\t>\n\t\t\t\t<span className=\"voucherifyRedeemText\">{textRedeem}</span>\n\t\t\t</button>\n\t\t</div>\n\t)\n}\n","import * as React from 'react'\n\nimport {\n\tClientSideValidateParams,\n\tClientSideValidateResponse,\n\tDiscountAmount,\n\tDiscountPercent,\n\tDiscountUnit,\n\tVoucherifyClientSideOptions,\n} from '@voucherify/sdk'\n\nimport { VoucherifyLogo } from './VoucherifyLogo'\nimport clsx from 'clsx'\nimport { removeEmptyAttributes } from './helpers'\nimport { useVoucherifyClient } from './hooks/useVoucherifyClient'\nimport { useVoucherifyValidateInputs } from './hooks/useVoucherifyValidateInputs'\n\ninterface VoucherifyValidateOptions extends VoucherifyClientSideOptions {\n\t/**\n\t * CSS class applied to the input when entered code is invalid\n\t */\n\tclassInvalid?: string\n\t/**\n\t * CSS class describing animation of the input field when entered code is invalid\n\t */\n\tclassInvalidAnimation?: string\n\t/**\n\t * CSS class applied to the input when entered code is valid\n\t */\n\tclassValid?: string\n\t/**\n\t * CSS class describing animation of the input field when entered code is valid\n\t */\n\tclassValidAnimation?: string\n\t/**\n\t * source of the image appearing in the circle at the top\n\t */\n\tlogoSrc?: string\n\t/**\n\t * alt message of the image appearing in the circle at the top\n\t */\n\tlogoAlt?: string\n\t/**\n\t * a callback function invoked when the entered code is valid, it takes the validation response as a parameter\n\t */\n\tonValidated?: (response: ClientSideValidateResponse) => void\n\t/**\n\t * a callback function invoked when there is an error\n\t */\n\tonError?: (error: any) => void\n\t/**\n\t * flag enables the amount input field\n\t */\n\tamount?: boolean\n\t/**\n\t * text displayed as a placeholder in the code input field\n\t */\n\ttextPlaceholder?: string\n\t/**\n\t * text displayed as a placeholder in the amount input field (`amount: true` is required)\n\t */\n\tamountPlaceholder?: string\n\t/**\n\t * a text displayed on the button (default: \"Validate\")\n\t */\n\ttextValidate?: string\n}\nexport function VoucherifyValidate({\n\tapiUrl,\n\tclientApplicationId,\n\tclientSecretKey,\n\ttrackingId,\n\torigin,\n\tclassInvalid,\n\tclassInvalidAnimation,\n\tclassValid,\n\tclassValidAnimation,\n\tlogoSrc,\n\tlogoAlt,\n\tonValidated,\n\tonError,\n\tamount,\n\ttextPlaceholder,\n\tamountPlaceholder,\n\ttextValidate = 'Validate',\n}: VoucherifyValidateOptions) {\n\tconst classNameInvalid = classInvalid || 'voucherifyInvalid'\n\tconst classNameValid = classValid || 'voucherifyValid'\n\tconst classNameInvalidAnimation = classInvalidAnimation || 'voucherifyAnimationShake'\n\tconst classNameValidAnimation = classValidAnimation || 'voucherifyAnimationTada'\n\n\tconst [allDisabled, setDisabled] = React.useState(false)\n\tconst [client, isSubmitting, setSubmitting] = useVoucherifyClient({\n\t\tapiUrl,\n\t\tclientApplicationId,\n\t\tclientSecretKey,\n\t\ttrackingId,\n\t\torigin,\n\t})\n\n\tconst { input, inputState, onInputChange, resetInputs, setInput, setInputState } = useVoucherifyValidateInputs()\n\n\tconst [runValidateOnce, setRunValidateOnce] = React.useState(false)\n\n\tReact.useEffect(() => {\n\t\tresetInputs()\n\t\tsetDisabled(false)\n\t}, [client])\n\n\tconst classNames: any[] = Object.keys(inputState).map(key => {\n\t\tlet className: string = key\n\n\t\tconst classes = clsx([\n\t\t\tclassName,\n\t\t\trunValidateOnce\n\t\t\t\t? inputState[key]\n\t\t\t\t\t? `${classNameValid} ${classNameValidAnimation}`\n\t\t\t\t\t: `${classNameInvalid} ${classNameInvalidAnimation}`\n\t\t\t\t: '',\n\t\t])\n\n\t\treturn {\n\t\t\tname: key,\n\t\t\tclasses,\n\t\t}\n\t})\n\n\tconst onSubmit = React.useCallback(\n\t\tfunction onSubmit(_event: React.MouseEvent<HTMLButtonElement, MouseEvent>) {\n\t\t\tsetInput(prev => ({\n\t\t\t\t...prev,\n\t\t\t\tvoucherifyDiscountType: '',\n\t\t\t\tvoucherifyAmountOff: 0,\n\t\t\t\tvoucherifyUnitOff: 0,\n\t\t\t\tvoucherifyPercentOff: 0,\n\t\t\t\tvoucherifyTracking: '',\n\t\t\t}))\n\n\t\t\tsetInputState(prev => ({ ...prev, voucherifyValidate: false }))\n\n\t\t\tif (!input.voucherifyCode.trim()) {\n\t\t\t\tsetInputState(prev => ({ ...prev, voucherifyCode: false }))\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst payload: ClientSideValidateParams = {\n\t\t\t\tcode: input.voucherifyCode,\n\t\t\t\tamount:\n\t\t\t\t\tinput.voucherifyAmount.trim() === '' ||\n\t\t\t\t\tisNaN(parseInt((parseFloat(input.voucherifyAmount.replace(/,/, '.')) * 100).toString(), 10))\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: parseInt((parseFloat(input.voucherifyAmount.replace(/,/, '.')) * 100).toString(), 10),\n\t\t\t}\n\n\t\t\tconst sanitizedPayload = removeEmptyAttributes(payload)\n\n\t\t\tsetSubmitting(true)\n\n\t\t\tclient\n\t\t\t\t.validate(sanitizedPayload)\n\t\t\t\t.then(function (_response) {\n\t\t\t\t\tconst response: ClientSideValidateResponse = _response\n\n\t\t\t\t\tif (!response || !response.valid) {\n\t\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tvoucherifyValidate: false,\n\t\t\t\t\t\t\tvoucherifyAmount: false,\n\t\t\t\t\t\t\tvoucherifyCode: false,\n\t\t\t\t\t\t}))\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tif (response?.discount) {\n\t\t\t\t\t\tconst responseDiscount = response?.discount as DiscountUnit | DiscountAmount | DiscountPercent\n\n\t\t\t\t\t\tswitch (responseDiscount.type) {\n\t\t\t\t\t\t\tcase 'AMOUNT':\n\t\t\t\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\tvoucherifyDiscountType: responseDiscount.type || '',\n\t\t\t\t\t\t\t\t\tvoucherifyAmountOff: responseDiscount.amount_off || 0,\n\t\t\t\t\t\t\t\t\tvoucherifyUnitOff: 0,\n\t\t\t\t\t\t\t\t\tvoucherifyPercentOff: 0,\n\t\t\t\t\t\t\t\t\tvoucherifyTracking: response?.tracking_id || '',\n\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 'UNIT':\n\t\t\t\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\tvoucherifyDiscountType: responseDiscount.type || '',\n\t\t\t\t\t\t\t\t\tvoucherifyAmountOff: 0,\n\t\t\t\t\t\t\t\t\tvoucherifyUnitOff: responseDiscount.unit_off || 0,\n\t\t\t\t\t\t\t\t\tvoucherifyPercentOff: 0,\n\t\t\t\t\t\t\t\t\tvoucherifyTracking: response?.tracking_id || '',\n\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\t\tcase 'PERCENT':\n\t\t\t\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\t\t\tvoucherifyDiscountType: responseDiscount.type || '',\n\t\t\t\t\t\t\t\t\tvoucherifyAmountOff: 0,\n\t\t\t\t\t\t\t\t\tvoucherifyUnitOff: 0,\n\t\t\t\t\t\t\t\t\tvoucherifyPercentOff: responseDiscount.percent_off || 0,\n\t\t\t\t\t\t\t\t\tvoucherifyTracking: response?.tracking_id || '',\n\t\t\t\t\t\t\t\t}))\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetInput(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tvoucherifyDiscountType: 'GIFT_CARD',\n\t\t\t\t\t\t\tvoucherifyAmountOff: response?.order?.total_discount_amount || 0,\n\t\t\t\t\t\t\tvoucherifyUnitOff: 0,\n\t\t\t\t\t\t\tvoucherifyPercentOff: 0,\n\t\t\t\t\t\t\tvoucherifyTracking: response?.tracking_id || '',\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\n\t\t\t\t\tsetDisabled(true)\n\n\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t...prev,\n\t\t\t\t\t\tvoucherifyCode: true,\n\t\t\t\t\t\tvoucherifyAmount: true,\n\t\t\t\t\t\tvoucherifyValidate: true,\n\t\t\t\t\t}))\n\n\t\t\t\t\tif (typeof onValidated === 'function') onValidated(response)\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.error(err)\n\t\t\t\t\tif (err.key === 'missing_order') {\n\t\t\t\t\t\tsetInputState(prev => ({\n\t\t\t\t\t\t\t...prev,\n\t\t\t\t\t\t\tvoucherifyValidate: false,\n\t\t\t\t\t\t\tvoucherifyAmount: false,\n\t\t\t\t\t\t\tvoucherifyCode: false,\n\t\t\t\t\t\t}))\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof onError === 'function') onError(err)\n\t\t\t\t})\n\t\t\t\t.finally(() => {\n\t\t\t\t\tsetSubmitting(false)\n\t\t\t\t\tsetRunValidateOnce(true)\n\t\t\t\t})\n\t\t},\n\t\t[input, onError, onValidated, amount],\n\t)\n\n\treturn (\n\t\t<div className=\"voucherifyContainer\">\n\t\t\t<VoucherifyLogo src={logoSrc} alt={logoAlt} />\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tplaceholder={textPlaceholder || 'e.g. abc-123'}\n\t\t\t\tname=\"voucherifyCode\"\n\t\t\t\tvalue={input['voucherifyCode']}\n\t\t\t\tonChange={onInputChange}\n\t\t\t\tclassName={classNames.find((cls: any) => cls.name === 'voucherifyCode').classes}\n\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype={amount ? 'text' : 'hidden'}\n\t\t\t\tplaceholder={amountPlaceholder || 'e.g. 52.22'}\n\t\t\t\tname=\"voucherifyAmount\"\n\t\t\t\tvalue={input['voucherifyAmount']}\n\t\t\t\tonChange={onInputChange}\n\t\t\t\tclassName={classNames.find((cls: any) => cls.name === 'voucherifyAmount').classes}\n\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tname=\"voucherifyDiscountType\"\n\t\t\t\tvalue={input['voucherifyDiscountType']}\n\t\t\t\tclassName=\"voucherifyDiscountType\"\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tname=\"voucherifyPercentOff\"\n\t\t\t\tvalue={input['voucherifyPercentOff']}\n\t\t\t\tclassName=\"voucherifyPercentOff\"\n\t\t\t/>\n\t\t\t<input\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tname=\"voucherifyAmountOff\"\n\t\t\t\tvalue={input['voucherifyAmountOff']}\n\t\t\t\tclassName=\"voucherifyAmountOff\"\n\t\t\t/>\n\t\t\t<input type=\"hidden\" name=\"voucherifyUnitOff\" value={input['voucherifyUnitOff']} className=\"voucherifyUnitOff\" />\n\t\t\t<input\n\t\t\t\ttype=\"hidden\"\n\t\t\t\tname=\"voucherifyTracking\"\n\t\t\t\tvalue={input['voucherifyTracking']}\n\t\t\t\tclassName=\"voucherifyTracking\"\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tclassName={classNames.find((cls: any) => cls.name === 'voucherifyValidate').classes}\n\t\t\t\tdisabled={isSubmitting || allDisabled}\n\t\t\t\tonClick={onSubmit}\n\t\t\t>\n\t\t\t\t<span className=\"voucherifyValidateText\">{textValidate}</span>\n\t\t\t</button>\n\t\t</div>\n\t)\n}\n"],"names":["VoucherifyLogo","src","React","className","alt","viewBox","fill","d","toVal","mix","k","y","str","Array","isArray","length","tmp","x","i","arguments","splitLongKey","key","split","map","string","charAt","toUpperCase","slice","join","removeEmptyAttributes","obj","Object","keys","forEach","undefined","validatePhoneNumber","phoneNumber","test","validateEmail","email","toLowerCase","useVoucherifyClient","options","useState","VoucherifyClientSide","client","setClient","isSubmitting","setSubmitting","useEffect","apiUrl","clientApplicationId","clientSecretKey","trackingId","origin","getEmptyInputs","voucherifyCode","voucherifyAmount","voucherifyDiscountType","voucherifyPercentOff","voucherifyAmountOff","voucherifyUnitOff","voucherifyTracking","getEmptyInputState","voucherifyValidate","name","phone","line_1","line_2","postal_code","city","state","country","voucherifyPublishStatus","voucherifyPublish","voucherifyRedeem","getEmptyValidInputState","voucherifySubscribeStatus","voucherifySubscribe","ERROR_MESSAGE","logoSrc","logoAlt","onPublished","onError","campaignName","customerFields","customerNamePlaceholder","customerEmailPlaceholder","customerPhonePlaceholder","customerLine1Placeholder","customerLine2Placeholder","customerPostalCodePlaceholder","customerCityPlaceholder","customerStatePlaceholder","customerCountryPlaceholder","textPublish","classNameInvalid","classInvalid","classNameValid","classValid","classNameInvalidAnimation","classInvalidAnimation","classNameValidAnimation","classValidAnimation","allDisabled","setDisabled","visible","setVisible","runPublishOnce","setRunPublishOnce","input","setInput","setInputState","inputStates","onInputChange","useCallback","event","target","prev","value","resetInputs","useVoucherifyPublishInputs","classNames","classes","clsx","notDefinedPlaceholders","createInput","inputName","inputPlaceholder","type","placeholder","onChange","find","cls","disabled","style","display","onSubmit","_event","payload","customer","replace","trim","source_id","address","sanitizedPayload","inputStatesAfterValidation","reduce","result","field","required","values","some","val","publish","then","_response","response","tracking_id","voucher","code","err","console","error","onClick","onRedeemed","amount","textPlaceholder","amountPlaceholder","textRedeem","runRedeemOnce","setRunRedeemOnce","inputValidStates","setValidInputState","useVoucherifyRedeemInputs","order","isNaN","parseInt","parseFloat","toString","redeem","consents","onSubscribed","emailPlaceholder","enableDoubleOptIn","textSubscribe","textSubscribeSuccess","runSubscribeOnce","setRunSubscribeOnce","consentsError","setConsentsError","loading","setLoading","loadedConsents","setLoadedConsents","widgetFields","useVoucherifySubscribeInputs","onRender","listConsents","fetchedData","filteredConsents","data","filter","o1","o2","id","foundConsents","foundConsentsStates","consent","createCustomer","object","createdCustomerId","updateConsents","_customerFields$find","_customerFields$find2","_customerFields$find3","_customerFields$find4","_customerFields$find5","_customerFields$find6","_customerFields$find7","_customerFields$find8","description","onValidated","textValidate","inputState","persist","useVoucherifyValidateInputs","runValidateOnce","setRunValidateOnce","validate","valid","discount","responseDiscount","amount_off","unit_off","percent_off","total_discount_amount"],"mappings":"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"}